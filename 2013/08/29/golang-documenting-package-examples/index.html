
<!DOCTYPE HTML>
<html>
<head>
	<script data-cfasync="false" type="text/javascript" src="//use.typekit.net/axj3cfp.js"></script>
	<script data-cfasync="false" type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<meta charset="utf-8">
	<title>Golang Documenting Package Examples  | Chavez</title>

<meta name="author" content="Chavez">

<meta name="description" content="Go has been gaining a lot of popularity recently. With a
lot of the success stories centered on the performance gains switching from
other languages &hellip;"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="Chavez" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="/javascripts/jquery.fancybox.pack.js"></script>

<script language="Javascript" type="text/javascript">
$(document).ready(
  function() {
    (function($) {
      $(".fancybox[data-content-id]").each(function() {
        this.href = $(this).data('content-id');
      });
      $(".fancybox").fancybox({
        beforeLoad: function() {
          var el, 
              id = $(this.element).data('title-id');

          if (id) {
            el = $('#' + id);

            if (el.length) {
              this.title = el.html();
            }
          }
          if ($(this).data('content')) {
            this.content = $(this).data('content');
          }
        },
        helpers: {
          title: {
            type: 'inside'
          }
        }
      });
    })(jQuery);
  }
);
</script>

	<link rel="stylesheet" href="/stylesheets/styles/solarized_dark.css">

</head>



<body>
	<header id="header" class="inner"><h1><a href="/">Chavez</a></h1>
<h4>Code, Thoughts And Ideas</h4>
<nav id="main-nav"><ul>
	<li><a class="" href="/">Blog</a></li>
	<li><a class="" href="/about">About</a></li>
  <li><a class="" href="/projects">Projects</a></li>
	<li><a class="" href="/archives">Archive</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a class="" href="/">Blog</a></li>
	<li><a class="" href="/about">About</a></li>
  <li><a class="" href="/projects">Projects</a></li>
	<li><a class="" href="/archives">Archive</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:blog.el-chavez.me">
			</form>
		</div>
	</div>
</nav>


</header>

	<div id="content" class="inner"><article class="post">
	<h2 class="title">Golang Documenting Package Examples</h2>
	<div class="entry-content"><p><a href="http://golang.org/">Go</a> has been gaining a lot of popularity recently. With a
lot of the success stories centered on the performance gains switching from
other languages. For me a lot of the smaller features, that shows an attention
to detail, which makes it enjoyable to code in. These details are also what
will help the Golang community grow as well. One of these details is the built
in documentation into the language.</p>

<p>There is a built in <code>go doc</code> command with the language where you can view your
package documentation locally by running an http server to serve your docs.
<a href="http://godoc.org/">GoDoc</a> is the main hosting for open source packages that
will build docs for your package by doing a <code>go get</code> and generating docs.
<!--more-->
Locally you can run <code>go doc</code> from your package to display the docs in your
terminal.</p>

<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="err">$</span> <span class="nx">cd</span> <span class="err">$</span><span class="nx">GOPATH</span><span class="o">/</span><span class="nx">src</span><span class="o">/</span><span class="nx">github</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">mtchavez</span><span class="o">/</span><span class="k">go</span><span class="o">-</span><span class="nx">statsite</span><span class="o">/</span><span class="nx">statsite</span>
<span class="err">$</span> <span class="k">go</span> <span class="nx">doc</span>
<span class="nx">PACKAGE</span> <span class="nx">DOCUMENTATION</span>

<span class="kn">package</span> <span class="nx">statsite</span>
    <span class="kn">import</span> <span class="s">&quot;github.com/mtchavez/go-statsite/statsite&quot;</span>



<span class="nx">VARIABLES</span>

<span class="kd">var</span> <span class="nx">MTypes</span> <span class="p">[]</span><span class="kt">string</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span>
    <span class="s">&quot;kv&quot;</span><span class="p">,</span>
    <span class="s">&quot;g&quot;</span><span class="p">,</span>
    <span class="s">&quot;ms&quot;</span><span class="p">,</span>
    <span class="s">&quot;c&quot;</span><span class="p">,</span>
    <span class="s">&quot;s&quot;</span><span class="p">,</span>
<span class="p">}</span>


<span class="nx">TYPES</span>

<span class="kd">type</span> <span class="nx">Client</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">Conn</span> <span class="nx">net</span><span class="p">.</span><span class="nx">Conn</span>
    <span class="c1">// contains filtered or unexported fields</span>
<span class="p">}</span>


<span class="kd">func</span> <span class="nx">NewClient</span><span class="p">(</span><span class="nx">addr</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">client</span> <span class="o">*</span><span class="nx">Client</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>


<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">Client</span><span class="p">)</span> <span class="nx">Emit</span><span class="p">(</span><span class="nx">m</span> <span class="nx">Messenger</span><span class="p">)</span> <span class="p">(</span><span class="kt">bool</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="o">*</span><span class="nx">Client</span><span class="p">)</span> <span class="nx">Emitter</span><span class="p">(</span><span class="nx">msg</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">ok</span> <span class="kt">bool</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span></code></pre></div>

<p>Or you can view all the packages in your <code>$GOSRC</code> directory as well as the
standard library code in your browser by running <code>godoc -http=:6060</code>. Then
visit <code>localhost:6060</code> in your browser. This looks the same as golang.org you
may notice. Click on <code>Packages</code> and find the package you are looking for. This
all comes built into the language itself.</p>

<p>If you have spent any time using go, browsed the standard library docs, used
an open source go project you may have notice a <code>Examples</code> in docs. These
examples are one of the details I mentioned that add to the language and help
grow a community. <a href="http://golang.org/pkg/time/#pkg-examples">Here</a> is an
example of the built in <code>time</code> package examples. The novel thing about this is
it is just the built in examples from the Go source that get generated by <code>go
doc</code> from the language itself. There is no extra documentation package or
custom manages site.</p>

<p>So you have an open source project, or some internal go project, that you want
to make life easier for others to pick up and understand. Lets write an
example for them to understand how to use your package. Lets say you have a
fibonacci number generator package. And you want to show someone how to use it
with an example. Lets add a <code>$GOPATH/src/fib</code> directory with a <code>fib.go</code> main
package with the following:</p>

<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">fib</span>

<span class="kn">import</span> <span class="p">(</span>
  <span class="s">&quot;fmt&quot;</span>
  <span class="s">&quot;os&quot;</span>
  <span class="s">&quot;strconv&quot;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">fib</span><span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
  <span class="k">if</span> <span class="nx">n</span> <span class="p">&lt;</span> <span class="mi">2</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">n</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">fib</span><span class="p">(</span><span class="nx">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">fib</span><span class="p">(</span><span class="nx">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>

<p>Since we’ll be expecting others to use our package we’ll want to test it works
as well as document how to use it. With examples we can do both in one shot.
In our same <code>$GOPATH/src/fib</code> directory create a <code>fib_test.go</code> file. Lets add
our example test.</p>

<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">fib</span>

<span class="kn">import</span> <span class="p">(</span>
  <span class="s">&quot;fmt&quot;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">Example</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">output</span> <span class="kt">int</span>
  <span class="nx">output</span> <span class="p">=</span> <span class="nx">fib</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Fibonacci of %v is %v\n&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">output</span><span class="p">)</span>
  <span class="nx">output</span> <span class="p">=</span> <span class="nx">fib</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Fibonacci of %v is %v\n&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="nx">output</span><span class="p">)</span>
  <span class="c1">// Output:</span>
  <span class="c1">// Fibonnacci of 10 is 55</span>
  <span class="c1">// Fibonnacci of 20 is 6765</span>
<span class="p">}</span></code></pre></div>

<p>Now from your <code>fib/</code> directory run <code>go test</code> and you should see some similar
output:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>go <span class="nb">test</span>
PASS
ok    fib 0.023s</code></pre></div>

<p>This allowed us to both test our fibonacci package and show someone else an
example how to use it. If the output changed or we broke our package our tests
should fail as well.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>go <span class="nb">test</span>
--- FAIL: Example <span class="o">(</span>80.68us<span class="o">)</span>
got:
Fibonacci of <span class="m">10</span> is 55
Fibonacci of <span class="m">20</span> is 6765
want:
Fibonacci of <span class="m">10</span> is 55
Fibonacci of <span class="m">20</span> is 55
FAIL
<span class="nb">exit </span>status 1
FAIL  fib 0.018s</code></pre></div>

<p>Simple enough. What if you have a struct where you are calling a function off
of and want to show how one would use the function. The principal is the same
except we change our <code>Example()</code> function name in our test. If we change our
<code>fib.go</code> to this:</p>

<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">fib</span>

<span class="kn">import</span> <span class="p">(</span>
  <span class="s">&quot;fmt&quot;</span>
  <span class="s">&quot;os&quot;</span>
  <span class="s">&quot;strconv&quot;</span>
<span class="p">)</span>

<span class="kd">type</span> <span class="nx">FibStruct</span> <span class="kd">struct</span> <span class="p">{</span>
  <span class="nx">num</span>    <span class="kt">int</span>
  <span class="nx">result</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">fib</span><span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
  <span class="k">if</span> <span class="nx">n</span> <span class="p">&lt;</span> <span class="mi">2</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">n</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">fib</span><span class="p">(</span><span class="nx">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">fib</span><span class="p">(</span><span class="nx">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">f</span> <span class="o">*</span><span class="nx">FibStruct</span><span class="p">)</span> <span class="nx">Calculate</span><span class="p">(</span><span class="nx">num</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">f</span><span class="p">.</span><span class="nx">num</span> <span class="p">=</span> <span class="nx">num</span>
  <span class="nx">f</span><span class="p">.</span><span class="nx">result</span> <span class="p">=</span> <span class="nx">fib</span><span class="p">(</span><span class="nx">num</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>

<p>Then we can add an example on how to use our new <code>Calculate()</code> method in
<code>fib_test.go</code>.</p>

<div class="highlight"><pre><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nx">ExampleFibStruct_Calculate</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">f</span> <span class="o">:=</span> <span class="nx">FibStruct</span><span class="p">{}</span>
  <span class="nx">f</span><span class="p">.</span><span class="nx">Calculate</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Fibonacci of %v is %v\n&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">f</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span>

  <span class="nx">f</span><span class="p">.</span><span class="nx">Calculate</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Fibonacci of %v is %v\n&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="nx">f</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span>
  <span class="c1">// Output:</span>
  <span class="c1">// Fibonacci of 10 is 55</span>
  <span class="c1">// Fibonacci of 20 is 6765</span>
<span class="p">}</span></code></pre></div>

<p>Running the tests again with <code>go test</code> should show everything passing. Last
part to this is viewing your examples via <code>go doc</code> or on
<a href="http://godoc.org">GoDoc</a>. You can view this example at <a href="http://godoc.org/github.com/mtchavez/fib-go-example">fib-go-
example</a>.</p>
</div>


<div class="meta">
	<div class="postdate">







<time datetime="" pubdate data-updated="true"></time>


<time class='entry-date' datetime='2013-08-29T14:40:00-07:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span></time></div>
	

<div class="tags">

	<a class='category' href='/categories/go/'>go</a>, <a class='category' href='/categories/golang/'>golang</a>, <a class='category' href='/categories/golang-documentation/'>golang documentation</a>, <a class='category' href='/categories/golang-examples/'>golang examples</a>

</div>


	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
<!---	<a class="addthis_counter addthis_pill_style"></a> --->
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
	<footer id="footer" class="inner">Copyright &copy; 2015

    Chavez

<br>
</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'el-chavez';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'https://blog.el-chavez.me/2013/08/29/golang-documenting-package-examples/';
        var disqus_url = 'https://blog.el-chavez.me/2013/08/29/golang-documenting-package-examples/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






<script src="/javascripts/highlight.pack.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  $('pre code').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
</script>

</body>
</html>
